# 스프링 MVC 학습 내용 및 내용 계열화
1. 목표 : 실무적인 요청값과 url 처리 패턴을 익숙하게 하고, DB처리를 단계별로 sql에 따른
	처리를 하기 위한 내용이다.
2. 단계별 이해 내용
	1) spring을 url을 처리 프로세스를 통한 MVC 처리와 그 결과 출력에 대한 이해
		- 초기에 url : http://localhost:5050/start01 브라우저에 입력
		- dispatcherServlet(스프링이 내장하고 있는 공통 controller) 
		- urlhandlerMapping(위 url 주소에 맞는 사용자 정의 controller 안에 특정한 메서드를 찾기)
		- 위에 url에 해당하는 controller로 등록된 객체안에 특정 기능 기능메서드 위한 선언된
			@GettingMapping("start")  에 해당 하는 메서드 찾아서 메서드 내용을 실행
		- 마지막에 return "view단" 해당 view단을 호출하여 초기 화면을 로딩 합니다.
		- 화면이 로딩된 상황에서 form객체 안에 요청값을 입력 name="name" name="age"  이름[홍길동] 나이[25]
			입력 후, action 지정된 controller의 url을 다시 호출 합니다. <form action="schReq">
		- schReq?name=홍길동&age=김길동 형식으로 다시 위의 과정을 거친다. 
			- dispatchServlet ==> urlhandlerMapping ==> controller 안에 있는 @GettingMapping("schReq")
			- 호출하면서 특정 기능 메서드 
				public String getSeach(@RequestParam("name") String name, 
									   @RequestParam("age") int age, 
				)
				로 요청값을 전달한다.
			- 그리고 위 내용에 DB와 관련되어 결과값을 처리해야 한다면 Service 객체의 메서드(String name, int age)
			- Dao 인터페이스의 매개변수로 처리하여 데이터를 결과를 처리한다.
				@Select("select * from person where name=#{name} and age=#{age})
				public Person getPerson(@Param("name") String name, @Param("age") int age);
				==> 위와 같애 form에 입력한 내용이 DB sql의 조회 조건의 매개값으로까지 전달하고,
				그 결과 데이터를 ==> Person이라는 객체에 할당하면
			- 다시 Service낭에 Person객체를 전달하고,
			- 다시 Controller에 전달하고, 이 Person객체는 View단을 보내기 위해 Model 이라는 객체를 이용하여
				Model d
				d.addAttribute("person", service.getPerson(name, age));
				형태로 view단에 보낼 준비를 하고
			- return "personInfo.jsp" 로 view를 호출하고
			- personInfo.jsp에서는  위 controller 안에서 정의된 person키를 통해서
				${person.name)
				${person.age)
				${person.loc) 로 여러가지 css/javascript/html안에서 핵심데이터를 모델을 출력하게 된다.
				이게 DB와 연동된 기본 MVC 패턴의 핵심 프로세스이다.
	
	2) spring 요청값 처리
		- get방식 post방식 차이 이해
		- 단일 데이터 요청	
		- 동일한 요청 키에 따른 여러 데이터 처리 요청
		- 다양한 키에 따른 요청 데이터 처리
		- 요청값을 객체로 할당하여 처리
		
		- 모델데이터 처리(단일)
		- 모델데이터 처리(객체형)
		- 모델데이터 처리(요청 + 모델)
		- 모델데이터 처리(요청 + 모델-객체형)
		
	3) 데이터 처리 구조 이해
		controller ==> service ==> dao ==> service ==> model ==> view(jsp)
		
		초기화면이 url의해서 출력(view)
			사원정보 검색을 위한 ui 구성
			사원명 :[    ]   직책명:[    ]  [검색]  => 비슷한 사원명과 직책명이 있으면 검색 UI
			---------------------------------
			사원번호 사원명 직책명 입사일 급여 보너스 부서번호
			----------------------------------
			....
			....
		요청값으로 사원명과 직책명을 입력하고 검색을 클릭
		==> controller 호출 요청값이 Emp(사원명, 직책포함)
		==> service 매개변수로 전달.
		==> dao단에 sql에 전달 @Select("SELECT * FROM EMP WHERE ENAME LIKE #{ename} AND JOB LIKE #{job}");
		==> mybatis framework에 의해 위 내용을 처리한 결과 객체를 메서드의 선언형태로 실제 객체를 만들다.
			public List<Emp> getEmpList(Emp sch);	
			List<Emp> : 객체형 배열형태로 만들어 진다.
		==> service 리턴값으로 전달.
		==> controller 전달해서. model데이터로 설정한다.
			d.addAttribute("empList", service.getEmpList(sch));
		==> view단(jsp)에 전달하여 반복문으로 테이블 리스트로 출력한다.
			<c:forEach var="emp" items="${empList}">
				<tr><td>${emp.empno}</td><td>${emp.ename}</td><td>${emp.job}</td>...</td>
			</c:forEach>	
		
		
	4) sql의 유형에 따른 데이터 처리(조회형)
		- 단일 데이터 전달(DB결과) - select count(*) from emp
			한개의 데이터가 전달하는 경우 (결과만 있고, 입력x)
			데이터유형에 맞게 결과에 맞는 리턴유형 dao인터페이스에 선언.
			@Select("select count(*) from emp")
			int getEmpCount();
		--------------------------------------------------		
		 
		- 리스트형 데이터 전달(DB결과) - select ename from emp
		- 단일 요청값 단일 데이터 전달(요청+DB결과) - select count(*) cnt from emp  where deptno=#{deptno}  
				부서번호로 요청해서 해당 부서정보에 가지고 있는 갯수 확인
		- 단일 요청값 리스트형 데이터 전달(요청+DB결과) - select dname from emp  where deptno=#{deptno)		 
		- 다중 요청값 리스트형 데이터 전달(요청+DB결과) - select dname from emp  where sal between #{start} and #{end}
		- 단일 요청값 객체형(여러속성) 데이터 전달 - select * from emp where empno=#{empno} 		 
		- 단일 요청값 객체형 리스트 데이터 전달(여러속성) 데이터 전달 - select * from emp where job = #{job}
		- 다중 요청값 객체형 리스트 데이터 전달(여러속성) 데이터 전달 
			- select * from emp where ename like #{ename} and job like #{job}
	5) sql의 유형에 따른 데이터 처리(등록/수정/삭제)
		- 단일 요청값 결과값(등록한 갯수 리턴) - insert into emp(empno) values(#{empno});
		- 여러가지 속성 요청값 등록한 갯수 리턴 - insert into dept values(#{deptno},#{dname},#{loc})
		- 여러가지 속성 요청값 수정한 갯수 리턴 - update dept
		                                  set dname = #{dname},
		                                      loc = #{loc}
		                                 where deptno = #{deptno}
		- 단일 요청값 삭제한 갯수 리턴  - delete from emp where empno = #{empno}                                 			
		 		 
				
	 