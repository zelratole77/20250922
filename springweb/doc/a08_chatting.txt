# 스프링 WEBSOCKET을 활용한 실시간 채팅
1. 웹소켓 통신 소개
	1) Websocket 프로토콜을 사용하여 클라이언트와 서버 간의 양방향 실시간 통신을 구현하는 내용입니다.
	2) 웹소켓을 사용하면 클라이언트가 서버에 지속적으로 연결되어 메시지를 주고받을 수 있어 실시간 채팅, 알림, 게임 등에 활용됩니다.
	
	ex) [일반 기본 웹 프로그래밍] 특정 데이터 입력, 전송버튼을 클릭시, 서버에 데이터 전송하고, 그 결과를
		다시 화면에 받아서 처리(특정한 이벤트를 통해서 결과를 받게 됩니다.)
		[소켓통신 프로그램] 위 내용도 처리하면서 특정 js, 이벤트 하지 않더라도, 서버에서 데이터 전송해서
		그 데이터를 받아서 메시지, 정보를 처리하는 경우
	ex) 특정한 클라이언가 메시지를 보내면, 서버에 접속한 모든 클라이언트에 push방식으로 메시지를 전달(소켙 통신)하고,
		각 클라이언트들은 메시지 이벤트 없이도 실시간으로 받게 처리됩니다. 
	
	3) 채팅 프로그래밍의 프로세서
		- 특정 클라이언트가 접속을 하면 웹 서버에 소켙서버 갯체에서 접속한 클라이언트의 SOCKET SESSION(소켙을 통해 접속했다는 정보)
			을 누적시킨다.
		- 접속된 클라이언트 중에 한명이 메시지를 보내면 HANDLER 메시지 받은 메서드를 호출해서 그 메시지를 접속한 모든 클라이언트에게
			반복해서 전송한다.
		- 메시지를 전송하면 이와 함께 연결된 각 클라이언트에 있는 함수(메시지를 받은 함수 매개변수를 통해서-JS)에 메시지를 받아서
			각 클라이언트(브라우저) 화면에서 메시르를 출력처리한다. 
		- 접속 종료 버튼을 클릭하면, 서버에 접속해서 접속종료 메서드 호출하고, 대상 클라이언트가 삭제되어 해당 클라이언테게는 더
			이상 메시지를 전달되지 않게 처리 된다.
2. 환경 설정 및 의존성 추가
	1) pom.xml 의존성 추가.
		spring-boot-starter-websocket
	2) application.properties
		socketServer=ws:아이피주소:포트명/chat
	3) java로 공통 Socket 설정  Config 선언.
		@Configuration
		@EnableWebSocket
		public class WebSocketConfig implements WebSocketConfigurer
		로 핸들러 클래스와 화면단에서 url 주소로 연결하게 설정한다.
3. 백앤트 개발(java단 처리)
    0) 기본 채팅 화면 로딩..controller
	1) WebSocket 핸들러 클래스
		- 서버에서 클라이언트와 WebSocket 통신을 관리하는 핵심 클래스를 선언한다.
			TextWebSocketHandler객체 상속기반 설정
		- 필드 : Set<WebSocketSession>을 통해서 접속한 사용자들의 세션을 저장.
		- 메서드 :
			연결이 성공적으로 이루어졌을 때 설정하는 메서드 :afterConnectionEstablished()
			메시지를 전송할 때 호출되는 메서드 : handleTextMessage()
			연결이 종료되었을 때 호출되는 메서드 : afterConnectionClose()
			에러 발생 시 호출되는 메서드 : handleTransportError()
					
		
		
			








			